<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Minha Equipe</title>

<style>
body{
  margin:0;
  font-family:Arial;
  color:#fff;
  background: radial-gradient(circle at top, #4da3ff, #003bff 60%, #001a66);
  animation: fundoPulse 6s infinite alternate;
}
@keyframes fundoPulse{
  0%{ filter: brightness(1); }
  100%{ filter: brightness(1.25); }
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 30% 20%, rgba(50,150,255,0.35), transparent 60%),
    radial-gradient(circle at 80% 70%, rgba(0,120,255,0.25), transparent 70%);
  pointer-events:none;
  filter:blur(40px);
}

.header{
  background: rgba(0,80,255,0.35);
  padding:28px 18px;
  text-align:center;
  border-radius:0 0 20px 20px;
  backdrop-filter: blur(6px);
  box-shadow: 0 0 18px rgba(0,140,255,0.7);
}

.container{
  padding:18px;
  max-width:720px;
  margin:auto;
}

.card{
  background: rgba(0,80,255,0.25);
  padding:16px;
  border-radius:14px;
  margin-bottom:14px;
  box-shadow: 0 0 20px rgba(0,150,255,0.4);
  border: 1px solid rgba(100,180,255,0.35);
  backdrop-filter: blur(6px);
}

input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  background: rgba(0,60,255,0.45);
  color:#fff;
  font-size:15px;
  box-shadow: 0 0 12px rgba(0,140,255,0.6);
}

button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:8px;
  border:none;
  background: linear-gradient(90deg,#4da3ff,#0044ff);
  color:#fff;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 16px rgba(0,140,255,0.6);
}
button:hover{ transform:scale(1.04); }

#msgCopiado{
  text-align:center;
  opacity:0;
  transition:.3s;
  margin-top:8px;
}

.member{
  background: rgba(0,60,255,0.35);
  padding:12px;
  border-radius:10px;
  margin-bottom:10px;
  border:1px solid rgba(120,170,255,0.45);
}
</style>
</head>

<body>

<div class="header">
  <h2>Minha Equipe</h2>
  <p>Acompanhe seu desempenho</p>
</div>

<div class="container">

  <div class="card">
    <h3 id="bonus">0</h3>
    <div>BÃ”NUS</div>
  </div>

  <div class="card">
    <h3 id="ativosCampo">0</h3>
    <div>ATIVOS</div>
  </div>

  <div class="card">
    <h3 id="membroCampo">0</h3>
    <div>CONVIDADOS</div>
  </div>

  <!-- CÃ“DIGO DE CONVITE -->
  <div class="card">
    <h3>Seu CÃ³digo de Convite</h3>
    <input id="linkFinal" readonly>
    <button id="btnCopiar">Copiar link</button>
    <div id="msgCopiado">Link copiado!</div>
  </div>

  <!-- PROGRAMA DE INDICAÃ‡Ã•ES -->
  <div class="card">
    <h3>Programa de IndicaÃ§Ãµes</h3>

    <p style="font-size:14px;line-height:1.6">
      Convide novos usuÃ¡rios para participar da plataforma e investir com sucesso.
    </p>

    <ul style="font-size:14px;line-height:1.8;padding-left:18px">
      <li><strong>NÃ­vel 1:</strong> 30% de comissÃ£o</li>
      <li><strong>NÃ­vel 2:</strong> 5% de comissÃ£o</li>
      <li><strong>NÃ­vel 3:</strong> 3% de comissÃ£o</li>
    </ul>

    <div style="background:rgba(0,60,255,0.35);padding:12px;border-radius:10px;font-size:14px">
      <strong>Exemplo de ganhos:</strong><br>
      Se vocÃª convidar <strong>100 pessoas</strong> que investirem <strong>R$ 100</strong>:<br>
      ðŸ‘‰ <strong>(100 Ã— R$ 2) + (R$ 10.000 Ã— 30%) = R$ 3.200</strong>
    </div>

    <p style="font-size:14px;margin-top:10px">
      <strong>Potencial de ganhos:</strong> Promotores ativos podem faturar
      a partir de <strong>R$ 3.000 por mÃªs</strong>.
    </p>

    <p style="font-size:13px;opacity:.9">
      âš¡ As comissÃµes sÃ£o creditadas automaticamente apÃ³s o indicado realizar
      um investimento com sucesso.
    </p>
  </div>

  <!-- LISTA DE MEMBROS -->
  <div class="card">
    <h3>Membros</h3>
    <div id="membersList"></div>
  </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAcVPgUHbL4N9U1-H68klmGKWQF-YGleyc",
  authDomain: "vastbitloud-2872a.firebaseapp.com",
  projectId: "vastbitloud-2872a",
  storageBucket: "vastbitloud-2872a.appspot.com",
  messagingSenderId: "952931184412",
  appId: "1:952931184412:web:ee2a0e38826c30dd0cd4d9"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const userData = JSON.parse(localStorage.getItem('vast_userdata')||'null');
if(!userData){ location.href="login.html"; }

let codigo = (userData.myCode||"").replace("VAST-","MGX-");

document.getElementById("linkFinal").value =
  "https://loptuy.github.io/Magaxiaa/login.html?codigo="+encodeURIComponent(codigo);

document.getElementById("btnCopiar").onclick = async ()=>{
  await navigator.clipboard.writeText(linkFinal.value);
  msgCopiado.style.opacity=1;
  setTimeout(()=>msgCopiado.style.opacity=0,1500);
};

async function carregarEquipe(){
  const q = query(collection(db,"teams"), where("owner","==",codigo));
  const snap = await getDocs(q);
  let total=0;
  membersList.innerHTML="";
  snap.forEach(d=>{
    total++;
    const m=d.data();
    membersList.innerHTML+=`
      <div class="member">
        <strong>${m.memberName||"â€”"}</strong><br>
        CÃ³digo: ${m.member||"â€”"} â€¢ Telefone: ${m.phone||"â€”"}
      </div>`;
  });
  membroCampo.textContent=total;
}
carregarEquipe();
</script>

</body>
</html>